<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>s3asim: /home/aching/Avery/Work.School/Research/pvfs2-lock/s3asim/src/worker_help.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>/home/aching/Avery/Work.School/Research/pvfs2-lock/s3asim/src/worker_help.c File Reference</h1><code>#include &lt;unistd.h&gt;</code><br>
<code>#include &lt;limits.h&gt;</code><br>
<code>#include &quot;<a class="el" href="worker__help_8h.html">worker_help.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="icomm_8h.html">icomm.h</a>&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#78c99ffd76a7bb3c8c74db76207e9ab4">_XOPEN_SOURCE</a>&nbsp;&nbsp;&nbsp;500</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#08ed223d984ca8d7a4c4ff7816b2a860">MAX_RESULT_COUNT</a>&nbsp;&nbsp;&nbsp;1000000</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#e2e6087a7b34e4d9a569e479ee04e60f">STARTUP_COST</a>&nbsp;&nbsp;&nbsp;50000</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#161c6bf11404da23f92bd2ff27821b34">get_test_params</a> (int myid, int numprocs, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#e3c43967526bcb7e2c05d36854990a2c">send_recv_work_req</a> (int myid, int *wait_status_p, struct <a class="el" href="structwork__info__s.html">work_info_s</a> *work_info_p, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#91f9252d6a3c51a0a7f1c2b4862c08be">compare_results</a> (const void *ptr_1, const void *ptr_2)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#d8429d14833d850c0f3f071880bf6441">print_result</a> (struct <a class="el" href="structresult__s.html">result_s</a> *cur_result_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#e2fcc507d8e2594dc36e1ab4691682c8">do_work</a> (int myid, struct <a class="el" href="structwork__info__s.html">work_info_s</a> *work_info_p, struct <a class="el" href="structisend__info__s.html">isend_info_s</a> **query_frag_isend_matrix, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#ce440b5131cc6f4d43173277259fc944">merge_results</a> (int myid, struct <a class="el" href="structwork__info__s.html">work_info_s</a> *work_info_p, struct <a class="el" href="structquery__result__s.html">query_result_s</a> *query_result_list, struct <a class="el" href="structisend__info__s.html">isend_info_s</a> **query_frag_isend_matrix, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#592e46c30e8bc597540756ddad3517cf">worker_isend_results</a> (int myid, struct <a class="el" href="structwork__info__s.html">work_info_s</a> *work_info_p, int *last_query_offset_recv_p, struct <a class="el" href="structisend__info__s.html">isend_info_s</a> **query_frag_isend_matrix, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#0745be01f02ec2934f1011f12d888161">increment_work</a> (int myid, struct <a class="el" href="structwork__info__s.html">work_info_s</a> *last_query_result_sent_p, struct <a class="el" href="structwork__info__s.html">work_info_s</a> *last_query_result_comp_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#ed7389736e7c21d05fa56c0a084f4cb7">decrement_work</a> (int myid, struct <a class="el" href="structwork__info__s.html">work_info_s</a> *last_query_result_comp_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#96a210dab5fe40a84b24cada6de7462e">worker_check_isend_results</a> (int myid, int wait_status, struct <a class="el" href="structwork__info__s.html">work_info_s</a> *last_query_result_sent_p, struct <a class="el" href="structwork__info__s.html">work_info_s</a> *last_query_result_comp_p, struct <a class="el" href="structquery__result__s.html">query_result_s</a> *query_result_list, struct <a class="el" href="structisend__info__s.html">isend_info_s</a> **query_frag_isend_matrix, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#b07ca743d3a52f123f00baad6be7bb8e">worker_post_irecv</a> (int myid, struct <a class="el" href="structwork__info__s.html">work_info_s</a> *work_info_p, struct <a class="el" href="structquery__result__s.html">query_result_s</a> *query_result_list, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#ff51d5ed7d6274863acfae7518accaa2">worker_check_irecv_offsets</a> (int myid, int wait_status, int last_query_offset_recv, int *last_query_offset_comp_p, struct <a class="el" href="structquery__result__s.html">query_result_s</a> *query_result_list, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#3f763b87bf4c0f92bc0505c4ce186598">worker_do_dummy_io</a> (int myid, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">static int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#8564100c3e86069a546650a09c3d8222">worker_do_io</a> (int myid, int cur_io_query, struct <a class="el" href="structquery__result__s.html">query_result_s</a> *query_result_list, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#ca670aa4ccec1df3b834ec98395719b5">do_all_worker_io</a> (int myid, int wait_status, int last_io_ready, int *last_io_comp_p, struct <a class="el" href="structquery__result__s.html">query_result_s</a> *query_result_list, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#18eec021c54dddd519b819fa28ff4003">worker_check_all_irecv</a> (int myid, int numprocs, struct <a class="el" href="structquery__result__s.html">query_result_s</a> *query_result_list, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#8d5c9557c44361908b0d95a7ea13c120">worker_check_all_isend</a> (int myid, int numprocs, struct <a class="el" href="structisend__info__s.html">isend_info_s</a> **query_frag_isend_matrix, struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *mpe_events_p, struct <a class="el" href="structtest__params__s.html">test_params_s</a> *test_params_p)</td></tr>

<tr><td colspan="2"><br><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="worker__help_8c.html#c2c79eb96c5487595545713e78611d5b">decode_worker_state</a> [MAX_WORKER_STATE]</td></tr>

</table>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="78c99ffd76a7bb3c8c74db76207e9ab4"></a><!-- doxytag: member="worker_help.c::_XOPEN_SOURCE" ref="78c99ffd76a7bb3c8c74db76207e9ab4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define _XOPEN_SOURCE&nbsp;&nbsp;&nbsp;500          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="08ed223d984ca8d7a4c4ff7816b2a860"></a><!-- doxytag: member="worker_help.c::MAX_RESULT_COUNT" ref="08ed223d984ca8d7a4c4ff7816b2a860" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_RESULT_COUNT&nbsp;&nbsp;&nbsp;1000000          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<a class="anchor" name="e2e6087a7b34e4d9a569e479ee04e60f"></a><!-- doxytag: member="worker_help.c::STARTUP_COST" ref="e2e6087a7b34e4d9a569e479ee04e60f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STARTUP_COST&nbsp;&nbsp;&nbsp;50000          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="91f9252d6a3c51a0a7f1c2b4862c08be"></a><!-- doxytag: member="worker_help.c::compare_results" ref="91f9252d6a3c51a0a7f1c2b4862c08be" args="(const void *ptr_1, const void *ptr_2)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int compare_results           </td>
          <td>(</td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>ptr_1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&nbsp;</td>
          <td class="paramname"> <em>ptr_2</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Results are compared so that they can be placed in a sorted linked list. This is the comparator function which is used by qsort.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ptr_1</em>&nbsp;</td><td>Void pointer 1 to result structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>ptr_2</em>&nbsp;</td><td>Void pointer 2 to result structure. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>Less than 0 if ptr_1 &lt; ptr_2, equal to 0 if ptr_1 == ptr_2, and greater than 0 if ptr_1 &gt; ptr2. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ed7389736e7c21d05fa56c0a084f4cb7"></a><!-- doxytag: member="worker_help.c::decrement_work" ref="ed7389736e7c21d05fa56c0a084f4cb7" args="(int myid, struct work_info_s *last_query_result_comp_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int decrement_work           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structwork__info__s.html">work_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>last_query_result_comp_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used by <a class="el" href="worker__help_8c.html#96a210dab5fe40a84b24cada6de7462e">worker_check_isend_results()</a> to back off to the previous (query,frag) since it was not complete.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>last_query_result_comp_p</em>&nbsp;</td><td>Pointer to the work_info structure of the next (query,frag) to be checked (changed in this function). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ca670aa4ccec1df3b834ec98395719b5"></a><!-- doxytag: member="worker_help.c::do_all_worker_io" ref="ca670aa4ccec1df3b834ec98395719b5" args="(int myid, int wait_status, int last_io_ready, int *last_io_comp_p, struct query_result_s *query_result_list, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_all_worker_io           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>wait_status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>last_io_ready</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>last_io_comp_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structquery__result__s.html">query_result_s</a> *&nbsp;</td>
          <td class="paramname"> <em>query_result_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function will only be called if the worker-writing method is used. When the master notifies the worker of getting ready to write, the worker will try to do I/O to the queries which it has received offset arrays for. If collective I/O is used, the worker will be careful about when to call this function to ensure that all processes write together.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wait_status_p</em>&nbsp;</td><td>Pointer to the wait status of the worker. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>last_io_ready</em>&nbsp;</td><td>Last I/O operation possible </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>last_io_comp_p</em>&nbsp;</td><td>Pointer to the I/O query operation to try next (modified in this function). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query_result_list</em>&nbsp;</td><td>The head of the result list for a query. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="e2fcc507d8e2594dc36e1ab4691682c8"></a><!-- doxytag: member="worker_help.c::do_work" ref="e2fcc507d8e2594dc36e1ab4691682c8" args="(int myid, struct work_info_s *work_info_p, struct isend_info_s **query_frag_isend_matrix, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int do_work           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structwork__info__s.html">work_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>work_info_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structisend__info__s.html">isend_info_s</a> **&nbsp;</td>
          <td class="paramname"> <em>query_frag_isend_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The work is calculated based on a very simple model for determining the actual computational time of comparing each (query,frag). The results are generated and saved in the query_frag_isend_matrix in an array before sending to the master. After the compute time has been generated, it is simulated through usleep().<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>work_info_p</em>&nbsp;</td><td>Pointer to work_info structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query_frag_isend_matrix</em>&nbsp;</td><td>Pointer to matrix of isend request information. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="161c6bf11404da23f92bd2ff27821b34"></a><!-- doxytag: member="worker_help.c::get_test_params" ref="161c6bf11404da23f92bd2ff27821b34" args="(int myid, int numprocs, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int get_test_params           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numprocs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Before any work begins, the master distributes the test parameters to the workers through this function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>numprocs</em>&nbsp;</td><td>Number of processes used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="0745be01f02ec2934f1011f12d888161"></a><!-- doxytag: member="worker_help.c::increment_work" ref="0745be01f02ec2934f1011f12d888161" args="(int myid, struct work_info_s *last_query_result_sent_p, struct work_info_s *last_query_result_comp_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int increment_work           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structwork__info__s.html">work_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>last_query_result_sent_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structwork__info__s.html">work_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>last_query_result_comp_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Used by <a class="el" href="worker__help_8c.html#96a210dab5fe40a84b24cada6de7462e">worker_check_isend_results()</a> to check on the next possible piece of work that was completed. All (query,frag) tuples which were not checked by this worker are skipped in the <a class="el" href="worker__help_8c.html#96a210dab5fe40a84b24cada6de7462e">worker_check_isend_results()</a> function.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>last_query_result_sent_p</em>&nbsp;</td><td>Pointer to the work_info structure of the last (query,frag) sent. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>last_query_result_comp_p</em>&nbsp;</td><td>Pointer to the work_info structure of the next (query,frag) to be checked (changed in this function). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ce440b5131cc6f4d43173277259fc944"></a><!-- doxytag: member="worker_help.c::merge_results" ref="ce440b5131cc6f4d43173277259fc944" args="(int myid, struct work_info_s *work_info_p, struct query_result_s *query_result_list, struct isend_info_s **query_frag_isend_matrix, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int merge_results           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structwork__info__s.html">work_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>work_info_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structquery__result__s.html">query_result_s</a> *&nbsp;</td>
          <td class="paramname"> <em>query_result_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structisend__info__s.html">isend_info_s</a> **&nbsp;</td>
          <td class="paramname"> <em>query_frag_isend_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The results in the query_frag_isend_matrix are first converted to a linked list. Then this linked list is merged with the previous results (if there are any), which are also in a linked list.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>work_info_p</em>&nbsp;</td><td>Pointer to work_info structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query_result_list</em>&nbsp;</td><td>The head of the result list for a query. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query_frag_isend_matrix</em>&nbsp;</td><td>Pointer to matrix of isend request information. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="d8429d14833d850c0f3f071880bf6441"></a><!-- doxytag: member="worker_help.c::print_result" ref="d8429d14833d850c0f3f071880bf6441" args="(struct result_s *cur_result_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void print_result           </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structresult__s.html">result_s</a> *&nbsp;</td>
          <td class="paramname"> <em>cur_result_p</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Debugging function to print out the member variables of the result structure.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>cur_result_p</em>&nbsp;</td><td>Result which will have its member variables printed. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="e3c43967526bcb7e2c05d36854990a2c"></a><!-- doxytag: member="worker_help.c::send_recv_work_req" ref="e3c43967526bcb7e2c05d36854990a2c" args="(int myid, int *wait_status_p, struct work_info_s *work_info_p, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int send_recv_work_req           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>wait_status_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structwork__info__s.html">work_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>work_info_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The worker uses this function to send a request to the master process to request work. The wait_status is encoded in the frag section if the query is done or all queries are done. Otherwise the worker gets the (query,frag) information.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wait_status_p</em>&nbsp;</td><td>Pointer to the wait status of the worker. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>work_info_p</em>&nbsp;</td><td>Pointer to work information structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="18eec021c54dddd519b819fa28ff4003"></a><!-- doxytag: member="worker_help.c::worker_check_all_irecv" ref="18eec021c54dddd519b819fa28ff4003" args="(int myid, int numprocs, struct query_result_s *query_result_list, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void worker_check_all_irecv           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numprocs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structquery__result__s.html">query_result_s</a> *&nbsp;</td>
          <td class="paramname"> <em>query_result_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Do a final check on the query_result_list for any uncompleted irecvs. None should exist.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>numprocs</em>&nbsp;</td><td>Number of processes used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query_result_list</em>&nbsp;</td><td>The head of the result list for a query. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="8d5c9557c44361908b0d95a7ea13c120"></a><!-- doxytag: member="worker_help.c::worker_check_all_isend" ref="8d5c9557c44361908b0d95a7ea13c120" args="(int myid, int numprocs, struct isend_info_s **query_frag_isend_matrix, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void worker_check_all_isend           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>numprocs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structisend__info__s.html">isend_info_s</a> **&nbsp;</td>
          <td class="paramname"> <em>query_frag_isend_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Do a final check on the query_frag_isend_matrix for any uncompleted isends. None should exist.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>numprocs</em>&nbsp;</td><td>Number of processes used. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query_frag_isend_matrix</em>&nbsp;</td><td>Pointer to matrix of isend request information. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="ff51d5ed7d6274863acfae7518accaa2"></a><!-- doxytag: member="worker_help.c::worker_check_irecv_offsets" ref="ff51d5ed7d6274863acfae7518accaa2" args="(int myid, int wait_status, int last_query_offset_recv, int *last_query_offset_comp_p, struct query_result_s *query_result_list, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int worker_check_irecv_offsets           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>wait_status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>last_query_offset_recv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>last_query_offset_comp_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structquery__result__s.html">query_result_s</a> *&nbsp;</td>
          <td class="paramname"> <em>query_result_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Check for all the irecvs from all queries that had results from this worker. Post irecvs for the actual offset array when the size irecv is completed. Check for both the sizes and the actual offset arrays.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wait_status_p</em>&nbsp;</td><td>Pointer to the wait status of the worker. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>last_query_offset_recv</em>&nbsp;</td><td>Last query to look for offset irecv.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>last_query_offset_comp_p</em>&nbsp;</td><td>Pointer to information set in this function of the last query to look for offset irecvs. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query_result_list</em>&nbsp;</td><td>The head of the result list for a query. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="96a210dab5fe40a84b24cada6de7462e"></a><!-- doxytag: member="worker_help.c::worker_check_isend_results" ref="96a210dab5fe40a84b24cada6de7462e" args="(int myid, int wait_status, struct work_info_s *last_query_result_sent_p, struct work_info_s *last_query_result_comp_p, struct query_result_s *query_result_list, struct isend_info_s **query_frag_isend_matrix, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int worker_check_isend_results           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>wait_status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structwork__info__s.html">work_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>last_query_result_sent_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structwork__info__s.html">work_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>last_query_result_comp_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structquery__result__s.html">query_result_s</a> *&nbsp;</td>
          <td class="paramname"> <em>query_result_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structisend__info__s.html">isend_info_s</a> **&nbsp;</td>
          <td class="paramname"> <em>query_frag_isend_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The worker occasionally uses this function to check on the state of all its isends to the master for every (query,frag) it has processed. It checks the isends in order so that it can avoid checking a large amount of isend requests every time it is called.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>wait_status_p</em>&nbsp;</td><td>Pointer to the wait status of the worker. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>last_query_result_sent_p</em>&nbsp;</td><td>Pointer to the work_info structure of the last (query,frag) sent. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>last_query_result_comp_p</em>&nbsp;</td><td>Pointer to the work_info structure of the next (query,frag) to be checked (changed in this function). </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query_result_list</em>&nbsp;</td><td>The head of the result list for a query. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query_frag_isend_matrix</em>&nbsp;</td><td>Pointer to matrix of isend request information. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="3f763b87bf4c0f92bc0505c4ce186598"></a><!-- doxytag: member="worker_help.c::worker_do_dummy_io" ref="3f763b87bf4c0f92bc0505c4ce186598" args="(int myid, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int worker_do_dummy_io           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If the worker-writing mode is chosen with collective I/O, the all workers must participate since it is in the same communication group. When it does not actually write any data, the worker will also call MPI_File_write_all().<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="8564100c3e86069a546650a09c3d8222"></a><!-- doxytag: member="worker_help.c::worker_do_io" ref="8564100c3e86069a546650a09c3d8222" args="(int myid, int cur_io_query, struct query_result_s *query_result_list, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static int worker_do_io           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>cur_io_query</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structquery__result__s.html">query_result_s</a> *&nbsp;</td>
          <td class="paramname"> <em>query_result_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The noncontiguous memory regions of the result data for a completed query with the master's offset array are copied to a contiguous memory buffer. Disp is offset by the first offset to be written. A hindexed MPI Datatype is created for the possibly noncontiguous file regions. The write operation may be collective or individual depending on the test_params. This function is used by <a class="el" href="worker__help_8c.html#ca670aa4ccec1df3b834ec98395719b5">do_all_worker_io()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>cur_io_query</em>&nbsp;</td><td>The query for which we are going to write results. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query_result_list</em>&nbsp;</td><td>The head of the result list for a query. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="592e46c30e8bc597540756ddad3517cf"></a><!-- doxytag: member="worker_help.c::worker_isend_results" ref="592e46c30e8bc597540756ddad3517cf" args="(int myid, struct work_info_s *work_info_p, int *last_query_offset_recv_p, struct isend_info_s **query_frag_isend_matrix, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int worker_isend_results           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structwork__info__s.html">work_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>work_info_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>last_query_offset_recv_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structisend__info__s.html">isend_info_s</a> **&nbsp;</td>
          <td class="paramname"> <em>query_frag_isend_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Given work info (query,frag), the worker sends the results to the master. The results are first copied into a contiguous buffer. The size is sent in a first isend and then the actual result is sent in the next isend. The result data is sent only in the master-writing mode.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>work_info_p</em>&nbsp;</td><td>Pointer to work information structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>last_query_offset_recv_p</em>&nbsp;</td><td>Pointer to information set in this function of the last query to look for offset irecv. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query_frag_isend_matrix</em>&nbsp;</td><td>Pointer to matrix of isend request information. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

</div>
</div><p>
<a class="anchor" name="b07ca743d3a52f123f00baad6be7bb8e"></a><!-- doxytag: member="worker_help.c::worker_post_irecv" ref="b07ca743d3a52f123f00baad6be7bb8e" args="(int myid, struct work_info_s *work_info_p, struct query_result_s *query_result_list, struct mpe_events_s *mpe_events_p, struct test_params_s *test_params_p)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int worker_post_irecv           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>myid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structwork__info__s.html">work_info_s</a> *&nbsp;</td>
          <td class="paramname"> <em>work_info_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structquery__result__s.html">query_result_s</a> *&nbsp;</td>
          <td class="paramname"> <em>query_result_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structmpe__events__s.html">mpe_events_s</a> *&nbsp;</td>
          <td class="paramname"> <em>mpe_events_p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structtest__params__s.html">test_params_s</a> *&nbsp;</td>
          <td class="paramname"> <em>test_params_p</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
If the worker is using parallel I/O, it will have to receive the offset array from the master. It posts a irecv here for this query. Since it is possible that a irecv was already posted for this query, this function should not be called in that case.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>myid</em>&nbsp;</td><td>MPI myid. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>work_info_p</em>&nbsp;</td><td>Pointer to work information structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>query_result_list</em>&nbsp;</td><td>The head of the result list for a query. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mpe_events_p</em>&nbsp;</td><td>Pointer to timing structure. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>test_params_p</em>&nbsp;</td><td>Pointer to test_params. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 on success. </dd></dl>

</div>
</div><p>
<hr><h2>Variable Documentation</h2>
<a class="anchor" name="c2c79eb96c5487595545713e78611d5b"></a><!-- doxytag: member="worker_help.c::decode_worker_state" ref="c2c79eb96c5487595545713e78611d5b" args="[MAX_WORKER_STATE]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="worker__help_8c.html#c2c79eb96c5487595545713e78611d5b">decode_worker_state</a>[MAX_WORKER_STATE]          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<b>Initial value:</b><div class="fragment"><pre class="fragment">
    {
        <span class="stringliteral">"NOT_USED"</span>,
        <span class="stringliteral">"WAIT_RESULT_SIZE"</span>,
        <span class="stringliteral">"WAIT_RESULT"</span>,
        <span class="stringliteral">"DONE_RESULT"</span>,
        <span class="stringliteral">"START_IRECV"</span>,
        <span class="stringliteral">"WAIT_OFFSET_LIST_COUNT"</span>,
        <span class="stringliteral">"WAIT_OFFSET_LIST"</span>,
        <span class="stringliteral">"DONE_OFFSET_LIST"</span>,
        <span class="stringliteral">"IO_FINISHED"</span>
    }
</pre></div>
</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Sun May 20 13:10:04 2007 for s3asim by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
